var alwaysOnTop={dsettings:{targetid:"",orientation:2,position:[10,30],externalsource:"",frequency:1,hideafter:0,fadeduration:[500,500],display:0},settingscache:{},positiontarget:function(b,a){var c=!document.all||document.all&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,d={position:c?"fixed":"absolute",visibility:"visible"};0<a.fadeduration[0]&&(d.opacity=0);d[/^[13]$/.test(a.orientation)?"left":"right"]=a.position[0];d[/^[12]$/.test(a.orientation)?"top":"bottom"]=a.position[1];document.all&&
!window.XMLHttpRequest&&(d.width=b.width());b.css(d);c||(this.keepfixed(b,a),d="scroll."+a.targetid+" resize."+a.targetid,jQuery(window).bind(d,function(){alwaysOnTop.keepfixed(b,a)}));this.revealdiv(b,a,c);0<a.hideafter&&setTimeout(function(){alwaysOnTop.hidediv(a.targetid)},a.hideafter+a.fadeduration[0])},keepfixed:function(b,a){var c=jQuery(window),d=/^[13]$/.test(a.orientation),e=/^[12]$/.test(a.orientation),d=c.scrollLeft()+(d?a.position[0]:c.width()-b.outerWidth()-a.position[0]),c=c.scrollTop()+
(e?a.position[1]:c.height()-b.outerHeight()-a.position[1]);b.css({left:d+"px",top:c+"px"})},revealdiv:function(b,a){0<a.fadeduration[0]?b.show().animate({opacity:1},a.fadeduration[0]):b.show();if("session"==a.frequency)this.setCookie("sots"+a.targetid,"shown");else if(/^\d+ day/i.test(a.frequency)){var c=parseInt(a.frequency);this.setCookie("sotp"+a.targetid,c,c)}},hidediv:function(b){var a=jQuery("#"+b);"none"!=a.css("display")&&(b=this.settingscache[b],0<b.fadeduration[1]?a.animate({opacity:0},
b.fadeduration[1],function(){a.hide()}):a.hide(),b="scroll."+b.targetid+" resize."+b.targetid,jQuery(window).unbind(b))},loadajaxcontent:function(b,a){b.ajax({url:a.externalsource,error:function(a){alert("Error fetching Ajax content.\nServer Response: "+a.responseText)},success:function(c){c=b(c);c.get(0).id==a.targetid?alwaysOnTop.positiontarget(c.appendTo("body"),a):alert('Error: The value you have entered for "targetid" ('+a.targetid+") doesn't match the ID of your remote content's DIV container ("+
c.get(0).id+"). This must be corrected")}})},init:function(b){var a={},a=jQuery.extend(a,this.dsettings,b);this.settingscache[a.targetid]=a;"number"==typeof a.frequency?a.display=a.frequency>Math.random()?1:0:"session"==a.frequency?a.display="shown"==this.getCookie("sots"+a.targetid)?0:1:/^\d+ day/i.test(a.frequency)&&(parseInt(this.getCookie("sotp"+a.targetid))!=parseInt(a.frequency)&&this.setCookie("sotp"+a.targetid,"",-1),a.display=null!=this.getCookie("sotp"+a.targetid)?0:1);jQuery(document).ready(function(b){if(a.externalsource!=
""&&a.display)alwaysOnTop.loadajaxcontent(b,a);else if(a.externalsource==""){b=b("#"+a.targetid);if(a.display)alwaysOnTop.positiontarget(b,a);else{b.hide();return false}}})},getCookie:function(b){b=RegExp(b+"=[^;]*","i");return document.cookie.match(b)?document.cookie.match(b)[0].split("=")[1]:null},setCookie:function(b,a,c){if("undefined"!=typeof c){var d=new Date;d.setDate(d.getDate()+c);document.cookie=b+"="+a+"; expires="+d.toGMTString()}else document.cookie=b+"="+a+"; path=/"}};
